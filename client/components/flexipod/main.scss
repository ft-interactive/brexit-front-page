@import "variables";

@mixin nhFlexipod($layout-spec, $total-cols: $o-grid-columns) {
	@include nhFlexipodLayout($layout-spec);
}

@mixin nhFlexipodLayout($layout-spec) {
	.article-group {
		position: relative;
	}
	@if type-of($layout-spec) == list {
		@for $int from 1 through length($layout-spec) {
			$card-spec: nth($layout-spec, $int);
			@include nhFlexipodCard($int, $card-spec);
		}
	}
}

@mixin nhFlexipodCard($int, $card-spec) {

	@if type-of(nth($card-spec, 1)) == number {
		$width: nth($card-spec, 1);
		$type: nth($card-spec, 2);

		.article-group:nth-child(#{$int}) {
			.article {
				@include oGridColspan($width);
				display: flex;

				.story-card {
					@include nhStoryCard($type);
				}
			}
		}
	} @else {
		.article-group:nth-child(#{$int}) {
			@for $card-int from 1 through length($card-spec) {
				$nested-card: nth($card-spec, $card-int);
				$width: nth($nested-card, 1);
				$type: nth($nested-card, 2);

				.article:nth-child(#{$card-int}) {
					@include oGridColspan($width);
					display: flex;

					.story-card {
						@include nhStoryCard($type);
					}
				}
			}
		}
	}
}
